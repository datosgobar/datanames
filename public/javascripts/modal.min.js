'use strict';firebase.initializeApp({apiKey:'AIzaSyDbLZWG2xFkyP8BZz7dfJF5daK9F3KwJJ4',authDomain:'analytical-park-149313.firebaseapp.com',databaseURL:'https://analytical-park-149313.firebaseio.com',projectId:'analytical-park-149313',storageBucket:'analytical-park-149313.appspot.com',messagingSenderId:'215411573688'});var firebaseStorage=firebase.storage().ref(),randomString=function(a){for(var e='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',f=0;f<a;f++)e.charAt(Math.floor(Math.random()*e.length));return c},mergeStructure=function(a,c){return{settings:jQuery.extend(a.settings,c.settings),attr:c.hasOwnProperty('attr')?c.attr:{},styles:jQuery.extend(a.styles,c.styles),childrens:c.hasOwnProperty('childrens')?c.childrens:[]}},injectStyles=function(a,c){for(var e in c)a.style[e]=c[e];return!0},injectAttributes=function(a,c){for(var e in c)'class'===e?c[e].split(' ').forEach(function(f){a.classList.add(f)}):a.setAttribute(e,c[e]);return!0},injectChildrens=function(a,c){return c.forEach(function(e){a.appendChild(e)}),!0},buttonShareShow=function(a){return a.querySelector('.modalShare').style.opacity=1,!0},buttonShareHide=function(a){return a.querySelector('.modalShare').style.opacity='',a.querySelector('.modalShare input').checked=!1,!0},share=function(a,c){var e=c.parentNode.parentNode.parentNode,f=e.getAttribute('module-nro'),g=new Date,j=e.offsetWidth,k=e.offsetHeight,l,m;j>k?(l=2400,m=l/j*k):(m=1260,l=m/k*j),domtoimage.toBlob(e).then(function(n){console.log(n),firebaseStorage.child('module_'+f+'_'+randomString(10)+'_'+g.getTime()).put(n).then(function(o){var p=o.metadata.downloadURLs[0];'facebook'===a?window.open('https://www.facebook.com/sharer.php?u=https://datosgobar.github.io/GDE&picture='+p,'pop','width=600, height=260, scrollbars=no'):'twitter'===a?window.open('https://twitter.com/share?save.snapshot.downloadURL=https://datosgobar.github.io/GDE&image='+p):void 0})})},embebedContainerShow=function(a){return a.parentNode.parentNode.parentNode.querySelector('.embebedContainer').style.opacity='',a.parentNode.parentNode.parentNode.querySelector('.embebedContainer').style.visibility='',!0},embebedContainerHide=function(a){return a.parentNode.style.opacity=0,a.parentNode.style.visibility='hidden',!0},copyText=function(a){a.parentNode.querySelector('input').select();return window.document.execCommand('copy'),!0},Modal={variables:{colors:{base:'#767676',base_contraste:'#444444',gobar_ligth:'#17b2f8',gobar_dark:'#0695d6',palette:{color1:'#14499E',color2:'#27B5F6',color3:'#02D57A',color4:'#FF8140',color5:'#FFBB42'}},counts:{modulos:1}},module:{simple:function simple(a){var e=mergeStructure({settings:{type:'default',share:!1,embebed:!1,theme:'dark',transform:'mod-col-col',quantity:1},styles:{}},a),g={seccion:{html:'section',class:'modalContainer'},default:{html:'section',class:'modalContainer'}}[e.settings.type],j=window.document.createElement(g.html);j.setAttribute('module-nro',Modal.variables.counts.modulos);var k=Modal.module.responsive({settings:{transform:e.settings.transform,quantity:e.settings.quantity}});if(e.settings.share){var l=Modal.module.share({settings:{theme:e.settings.theme,embebed:e.settings.embebed}});if(j.setAttribute('onmouseenter','buttonShareShow(this)'),j.setAttribute('onmouseleave','buttonShareHide(this)'),k.appendChild(l),e.settings.embebed){var m=window.document.createElement('iframe');m.setAttribute('src',window.location.origin+'?seccion='+Modal.variables.counts.modulos),m.setAttribute('width','100%'),m.setAttribute('height','400px');var n=window.document.createElement('div');n.classList.add('embebedContainer'),n.style.opacity=0,n.style.visibility='hidden';var o=window.document.createElement('span');o.classList.add('embebedExit'),o.setAttribute('onclick','embebedContainerHide(this)'),o.innerHTML='<i class="fa fa-times" aria-hidden="true"></i>';var p=window.document.createElement('input');p.setAttribute('value',m.outerHTML);var q=Modal.add.button({settings:{type:'squareBig',text:'<i class="fa fa-clone" aria-hidden="true"></i><span style="margin-left: 10px;">Copiar</span>'},attr:{onclick:'copyText(this)'},styles:{backgroundColor:Modal.variables.colors.gobar_ligth,color:'white',margin:'0px 0px 0px 10px'}});n.appendChild(o),n.appendChild(p),n.appendChild(q),j.appendChild(n)}}return injectAttributes(j,e.attr),injectAttributes(j,{class:g.class}),injectStyles(j,e.styles),injectChildrens(k,e.childrens),Modal.variables.counts.modulos++,j.appendChild(k),j},responsive:function responsive(a){var e=mergeStructure({settings:{type:'default',transform:'mod-col-col',quantity:1},styles:{}},a),g={default:{html:'div',class:'modalResponsive'}}[e.settings.type],j=window.document.createElement(g.html);return j.classList.add(e.settings.transform),j.classList.add('child-'+e.settings.quantity),injectAttributes(j,e.attr),injectAttributes(j,{class:g.class}),injectStyles(j,e.styles),j},share:function(a){var e=mergeStructure({settings:{type:'default',theme:'dark',embebed:!1},styles:{}},a),g={default:{html:'div',class:'modalShare'}}[e.settings.type],j=window.document.createElement(g.html),k=window.document.createElement('input');k.setAttribute('id','share-'+Modal.variables.counts.modulos),k.setAttribute('type','checkbox'),k.classList.add('share-open');var l=window.document.createElement('label');l.setAttribute('for','share-'+Modal.variables.counts.modulos),l.classList.add('share-open-button'),l.classList.add('hamburger-'+e.settings.theme);for(var n,m=1;4>m;m++)n=window.document.createElement('span'),n.classList.add('hamburger-'+m),l.appendChild(n);var o=Modal.add.button({settings:{type:'circleSmall',text:'<i class="fa fa-code" aria-hidden="true"></i>'},attr:{class:'share-item buttonEmbebed',title:'Embeber secci\xF3n',onclick:'embebedContainerShow(this)'},styles:{backgroundColor:'black',color:'white',right:'0px'}}),p=Modal.add.button({settings:{type:'circleSmall',text:'<i class="fa fa-twitter" aria-hidden="true"></i>'},attr:{class:'share-item',title:'Compartir en Twitter',onclick:'share("twitter", this)'},styles:{backgroundColor:'#1DA1F2',color:'white',right:'0px'}}),q=Modal.add.button({settings:{type:'circleSmall',text:'<i class="fa fa-facebook" aria-hidden="true"></i>'},attr:{class:'share-item',title:'Compartir en Facebook',onclick:'share("facebook", this)'},styles:{backgroundColor:'#3B5998',color:'white',right:'0px'}});return injectAttributes(j,e.attr),injectAttributes(j,{class:g.class}),injectStyles(j,e.styles),j.appendChild(k),j.appendChild(l),!0===e.settings.embebed&&j.appendChild(o),j.appendChild(p),j.appendChild(q),j}},add:{button:function button(a){var c={settings:{type:'default',text:'Button'},styles:{backgroundColor:Modal.variables.colors.gobar_dark,color:'white'}},e=mergeStructure(c,a),j={default:{html:'button',class:'button buttonRound',classEfect:'buttonBig boton_efecto'},roundBig:{html:'button',class:'button buttonRound',classEfect:'buttonBig boton_efecto'},roundSmall:{html:'button',class:'button buttonRound',classEfect:'buttonSmall boton_efecto'},squareBig:{html:'button',class:'button buttonSquare',classEfect:'buttonBig boton_efecto'},squareSmall:{html:'button',class:'button buttonSquare',classEfect:'buttonSmall boton_efecto'},circleBig:{html:'button',class:'button buttonCircle',classEfect:'buttonCircleBig boton_efecto'},circleSmall:{html:'button',class:'button buttonCircle',classEfect:'buttonCircleSmall boton_efecto'}}[e.settings.type],k={default:{html:'span',class:'buttonBig boton_efecto'},roundBig:{html:'span',class:'buttonBig boton_efecto'},roundSmall:{html:'span',class:'buttonSmall boton_efecto'},squareBig:{html:'span',class:'buttonBig boton_efecto'},squareSmall:{html:'span',class:'buttonSmall boton_efecto'},circleBig:{html:'span',class:'buttonCircleBig boton_efecto'},circleSmall:{html:'span',class:'buttonCircleSmall boton_efecto'}}[e.settings.type],l=window.document.createElement(j.html),m=window.document.createElement('span');return m.innerHTML=e.settings.text,injectAttributes(l,e.attr),injectAttributes(l,{class:j.class}),injectAttributes(m,{class:k.class}),injectStyles(l,e.styles),injectChildrens(l,e.childrens),l.appendChild(m),l},title:function title(a){var e=mergeStructure({settings:{type:'default',text:'Titulo'},styles:{}},a),g={default:{html:'h2',class:'title'},title1:{html:'h1',class:'title'},title2:{html:'h2',class:'title'},title3:{html:'h3',class:'title'},title4:{html:'h4',class:'title'},title5:{html:'h5',class:'title'},title6:{html:'h6',class:'title'}}[e.settings.type],j=window.document.createElement(g.html);return j.innerHTML=e.settings.text,injectAttributes(j,e.attr),injectAttributes(j,{class:g.class}),injectStyles(j,e.styles),j},paragraph:function paragraph(a){var e=mergeStructure({settings:{type:'default',text:'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'},styles:{}},a),g={default:{html:'p',class:'paragraph'},small:{html:'p',class:'paragraph pSmall'},normal:{html:'p',class:'paragraph'},big:{html:'p',class:'paragraph pBig'},flywheel:{html:'p',class:'paragraph pFly'}}[e.settings.type],j=window.document.createElement(g.html);return j.innerHTML=e.settings.text,injectAttributes(j,e.attr),injectAttributes(j,{class:g.class}),injectStyles(j,e.styles),injectChildrens(j,e.childrens),j},space:function space(a){for(var l,c={settings:{type:'default',quantity:1},styles:{}},e=mergeStructure(c,a),f={default:{html:'div',class:'breakLine'},allways:{html:'div',class:'breakLine'},onlyWeb:{html:'div',class:'breakLine onlyWeb'},onlyMobile:{html:'div',class:'breakLine onlyMobile'}},g=f[e.settings.type],j=window.document.createElement(g.html),k=0;k<e.settings.quantity;k++)l=window.document.createElement('hr'),j.appendChild(l);return injectAttributes(j,e.attr),injectAttributes(j,{class:g.class}),injectStyles(j,e.styles),j},increment:function increment(a){var e=mergeStructure({settings:{type:'default',start:0,end:1e3,format:'(.ddd)'},styles:{}},a),g={default:{html:'div',class:'increment incrMedium odometer'},small:{html:'div',class:'increment incrSmall odometer'},normal:{html:'div',class:'increment incrMedium odometer'},big:{html:'div',class:'increment incrBig odometer'}}[e.settings.type],j=window.document.createElement(g.html),k=new Odometer({el:j,value:e.settings.start,theme:'minimal',format:e.settings.format,duration:1e3,auto:!0});return k.update(e.settings.end),injectAttributes(j,e.attr),injectAttributes(j,{class:g.class}),injectStyles(j,e.styles),j},subContainer:function subContainer(a){var e=mergeStructure({settings:{type:'default'},styles:{}},a),g={default:{html:'div',class:'subContainer'},div:{html:'div',class:'subContainer'},footer:{html:'footer',class:'subContainer'},header:{html:'header',class:'subContainer'},section:{html:'section',class:'subContainer'}}[e.settings.type],j=window.document.createElement(g.html);return injectAttributes(j,e.attr),injectAttributes(j,{class:g.class}),injectStyles(j,e.styles),injectChildrens(j,e.childrens),j},image:function image(a){var e=mergeStructure({settings:{type:'default',width:'200px',height:'200px'},styles:{}},a),g={default:{html:'img',class:'image'}}[e.settings.type],j=window.document.createElement(g.html);return j.setAttribute('width',e.settings.width),j.setAttribute('height',e.settings.height),injectAttributes(j,e.attr),injectAttributes(j,{class:g.class}),injectStyles(j,e.styles),j},link:function link(a){var e=mergeStructure({settings:{type:'default',text:'Esto es un enlace.'},styles:{}},a),g={default:{html:'a',class:'link'},link:{html:'a',class:'link link-inline'},block:{html:'a',class:'link link-block'}}[e.settings.type],j=window.document.createElement(g.html);return j.innerHTML=e.settings.text,injectAttributes(j,e.attr),injectAttributes(j,{class:g.class}),injectStyles(j,e.styles),injectChildrens(j,e.childrens),j},grafico:{linea:{horizontal:function horizontal(a){var c;return c=window.document.createElement('svg'),c.setAttribute('id',a.parametros.id),c}},torta:function torta(a){var c,e,f,j,k,l,o,p,g=Math.PI/180,m=280,n=280;c=window.document.createElement('div'),c.classList.add('grafico_torta'),c.style.width=m+'px',c.style.height=n+'px',j=a.dataset,e=d3.select(c).append('svg').attr('width',m).attr('height',n),f=d3.arc().innerRadius(m/2-25).outerRadius(m/2).startAngle(0).endAngle(360*g),k=e.selectAll('.arco').data(j).enter(),k.append('g').attr('transform','translate('+m/2+', '+n/2+')').append('path').attr('class','arco_fondo').attr('d',f),f.endAngle(function(s){return s.value*g}),l=k.append('g').attr('transform','translate('+m/2+', '+n/2+')').append('path').attr('class','arco');var q=function(s){var u=d3.interpolate({value:s.previous},s);return function(v){return f(u(v))}};return function r(){k.each(function(s){s.previous=s.value,s.value=s.change}),l.transition().duration(750).attrTween('d',q)}(),o=window.document.createElement('div'),o.classList.add('torta_texto_contenedor'),p=window.document.createElement('span'),p.innerHTML='80<span class="small">%<span>',o.appendChild(p),p=window.document.createElement('span'),p.innerHTML='Cantidad de documentos digitalizados',o.appendChild(p),c.appendChild(o),c},modelo:function modelo(){var a=window.document.createElement('div');return a.classList.add('modelo_grafico'),a}}}};
